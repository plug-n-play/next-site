import Layout from '../../../../components/learn/Layout';
import AnswerBox from '../../../../components/learn/AnswerBox';

export const meta = {
  title: 'Automatic Static Optimization',
  courseId: 'excel',
  lessonId: 'automatic-static-optimization',
  stepId: 'serverless',
  question: {
    answers: [
      'Error: unknown property target in next.config.js',
      'It was compiled to σ (Server)',
      'It was compiled to ⚡(Static File)',
      'It was compiled to λ (Lambda)'
    ],
    correctAnswer: 'It was compiled to λ (Lambda)'
  }
};

## Serverless

We can have static and SSR pages in the same app by only using `next build`.

Static HTML should always be fast since it can be cached very well, although there are still cases where you need to handle dynamic data. For these cases you can create lambda functions for each page.

We don't need a server if we can create a lambda per page, pages are independent after all, let's add the file `next.config.js` in the root folder with the following content:

```jsx
module.exports = {
  target: 'serverless'
};
```

Now when building the app again serverless bundles will be created for non-static pages:

```bash
npm run build
```

What happened in the compilation of `agent.js`?

export default ({ children }) => <Layout meta={meta}>{children}</Layout>;
