import Layout from '../../../../components/learn/Layout';
import AnswerBox from '../../../../components/learn/AnswerBox';

export const meta = {
  title: 'Deploying a Next.js App',
  courseId: 'basics',
  lessonId: 'deploying-a-nextjs-app',
  stepId: 'run-two-instances',
  question: {
    answers: [
      'Yes, both http://localhost:8000 and http://localhost:9000',
      'Only http://localhost:8000',
      'Only http://localhost:9000',
      'Neither one'
    ],
    correctAnswer: 'Yes, both http://localhost:8000 and http://localhost:9000'
  }
};

## Run two instances

Now we are going to run two instances of our app. Usually, we do this to horizontally scale our app.

First of all, replace the `scripts` of our `package.json` with the following:

```json
"scripts": {
  "dev": "next",
  "build": "next build",
  "start": "next start -p $PORT"
}
```

We changed the `start` script and it now accepts a port to start the app on.

> If you are on Windows, your start script should be `next start -p %PORT%`.

Now let's build our app:

```bash
npm run build
```

Then try to run the following commands, one by one (two sessions), in their own terminal:

```bash
PORT=8000 npm start
PORT=9000 npm start
```

> On Windows, you will need to run the commands differently. One option is to install the npm module [`cross-env`](https://www.npmjs.com/package/cross-env) into your app.
> Then run these two commands from the command line: <br/> `cross-env PORT=8000 npm start` <br/> `cross-env PORT=9000 npm start`

Is it possible to access our app on both ports?

export default ({ children }) => <Layout meta={meta}>{children}</Layout>;
